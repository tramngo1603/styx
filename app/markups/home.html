<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>BExplorer File Manager</title>
    <link rel="stylesheet" href="../css/all.css">
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <div class="top-bar">
        <div title="See folders you viewed previously" class="button-grp">
            <button id="back"><i class="fas fa-angle-left"></i></button>
            <button id="forward"><i class="fas fa-angle-right"></i></button>
        </div>
        <!-- <div title="Show items as icons or in a list" class="button-grp">
            <button id="iconView" class="active-btn"><i class="fas fa-th"></i></button>
            <button id="listView"><i class="fas fa-list"></i></button>
        </div> -->
    </div>
    <div class="main-window">

      <button style="margin-right: 100px">back</button>
      <i class="fas fa-home"><input value="/"></input></i>

        <div class="window">
            <div id="items" style="width:100%;height: 100%" ondrop="drop(event);" ondragover="allowDrop(event);">

            </div>
        </div>
    </div>
    <script>window.$ = window.jQuery = require('jquery');</script>
    <script src="../scripts/command.js"></script>
    <script>
            function allowDrop(ev) {
              ev.preventDefault();
            }

            function drop(ev) {
              ev.preventDefault();
              var itemName = ev.dataTransfer.files[0].name
              var itemType = ev.dataTransfer.types
              var duplicate = false

              // check for duplicate or files with the same name
              for (var i=0; i<ev.target.children.length;i++) {
                if (itemName === ev.target.children[i].innerText) {
                  duplicate = true
                  break
                }
              }

              /// check for File, not allowed Folder drag and drop for now
              if (itemType[0] === "Files") {
                if (duplicate) {
                  alert('Duplicate file name!')
                } else {
                    var appendString = '<div class="single-item"><h1 class="folder file"><i class="fas fa-file" style="margin-bottom:10px"></i></h1><div contenteditable="true" class="folder_desc">'+ev.dataTransfer.files[0].name+'</div></div>'
                    $(appendString).appendTo(ev.target);
                }
              } else {
                  alert('Folders are not allowed to be dropped in this area!')
              }
            }

    </script>
</body>
</html>
